--- config/coreboot-x230.config
+++ config/coreboot-x230.config
@@ -23,6 +23,7 @@ CONFIG_USE_BLOBS=y
 # CONFIG_COVERAGE is not set
 # CONFIG_UBSAN is not set
 CONFIG_RELOCATABLE_RAMSTAGE=y
+CONFIG_CACHE_RELOCATED_RAMSTAGE_OUTSIDE_CBMEM=y
 # CONFIG_UPDATE_IMAGE is not set
 # CONFIG_BOOTSPLASH_IMAGE is not set
 CONFIG_MEASURED_BOOT=y
@@ -34,9 +35,7 @@ CONFIG_MEASURED_BOOT=y
 #
 # Important: Run 'make distclean' before switching boards
 #
-# CONFIG_VENDOR_A_TREND is not set
 # CONFIG_VENDOR_AAEON is not set
-# CONFIG_VENDOR_ABIT is not set
 # CONFIG_VENDOR_ADI is not set
 # CONFIG_VENDOR_ADLINK is not set
 # CONFIG_VENDOR_ADVANSUS is not set
@@ -47,18 +46,14 @@ CONFIG_MEASURED_BOOT=y
 # CONFIG_VENDOR_ASROCK is not set
 # CONFIG_VENDOR_ASUS is not set
 # CONFIG_VENDOR_AVALUE is not set
-# CONFIG_VENDOR_AZZA is not set
 # CONFIG_VENDOR_BACHMANN is not set
 # CONFIG_VENDOR_BAP is not set
 # CONFIG_VENDOR_BCOM is not set
 # CONFIG_VENDOR_BIOSTAR is not set
 # CONFIG_VENDOR_BROADCOM is not set
-# CONFIG_VENDOR_COMPAQ is not set
 # CONFIG_VENDOR_COMPULAB is not set
 # CONFIG_VENDOR_CUBIETECH is not set
 # CONFIG_VENDOR_DIGITALLOGIC is not set
-# CONFIG_VENDOR_DMP is not set
-# CONFIG_VENDOR_ECS is not set
 # CONFIG_VENDOR_ELMEX is not set
 # CONFIG_VENDOR_EMULATION is not set
 # CONFIG_VENDOR_ESD is not set
@@ -71,40 +66,34 @@ CONFIG_MEASURED_BOOT=y
 # CONFIG_VENDOR_IBASE is not set
 # CONFIG_VENDOR_IEI is not set
 # CONFIG_VENDOR_INTEL is not set
-# CONFIG_VENDOR_IWAVE is not set
 # CONFIG_VENDOR_IWILL is not set
 # CONFIG_VENDOR_JETWAY is not set
 # CONFIG_VENDOR_KONTRON is not set
-# CONFIG_VENDOR_LANNER is not set
 CONFIG_VENDOR_LENOVO=y
 # CONFIG_VENDOR_LINUTOP is not set
 # CONFIG_VENDOR_LIPPERT is not set
 # CONFIG_VENDOR_LOWRISC is not set
-# CONFIG_VENDOR_MITAC is not set
 # CONFIG_VENDOR_MSI is not set
-# CONFIG_VENDOR_NEC is not set
-# CONFIG_VENDOR_NOKIA is not set
 # CONFIG_VENDOR_NVIDIA is not set
+# CONFIG_VENDOR_OCP is not set
 # CONFIG_VENDOR_PACKARDBELL is not set
 # CONFIG_VENDOR_PCENGINES is not set
 # CONFIG_VENDOR_PURISM is not set
-# CONFIG_VENDOR_RCA is not set
 # CONFIG_VENDOR_RODA is not set
 # CONFIG_VENDOR_SAMSUNG is not set
 # CONFIG_VENDOR_SAPPHIRE is not set
+# CONFIG_VENDOR_SCALEWAY is not set
 # CONFIG_VENDOR_SIEMENS is not set
-# CONFIG_VENDOR_SOYO is not set
+# CONFIG_VENDOR_SIFIVE is not set
 # CONFIG_VENDOR_SUNW is not set
 # CONFIG_VENDOR_SUPERMICRO is not set
 # CONFIG_VENDOR_TECHNEXION is not set
-# CONFIG_VENDOR_THOMSON is not set
 # CONFIG_VENDOR_TI is not set
 # CONFIG_VENDOR_TRAVERSE is not set
 # CONFIG_VENDOR_TYAN is not set
 # CONFIG_VENDOR_VIA is not set
 # CONFIG_VENDOR_WINENT is not set
 # CONFIG_VENDOR_WINNET is not set
-# CONFIG_VENDOR_WYSE is not set
 CONFIG_BOARD_SPECIFIC_OPTIONS=y
 CONFIG_MAINBOARD_DIR="lenovo/x230"
 CONFIG_MAINBOARD_PART_NUMBER="ThinkPad X230"
@@ -124,12 +113,11 @@ CONFIG_MAINBOARD_PCI_SUBSYSTEM_DEVICE_ID=0x21fa
 # CONFIG_HAVE_IFD_BIN is not set
 # CONFIG_HAVE_ME_BIN is not set
 CONFIG_DRAM_RESET_GATE_GPIO=10
-CONFIG_MMCONF_BASE_ADDRESS=0xf8000000
 # CONFIG_POST_IO is not set
 CONFIG_DEVICETREE="devicetree.cb"
 CONFIG_MAX_REBOOT_CNT=3
 CONFIG_USBDEBUG_HCD_INDEX=2
-CONFIG_ID_SECTION_OFFSET=0x80
+CONFIG_MMCONF_BASE_ADDRESS=0xf0000000
 # CONFIG_POST_DEVICE is not set
 CONFIG_IFD_BIOS_SECTION=""
 CONFIG_IFD_ME_SECTION=""
@@ -151,6 +139,7 @@ CONFIG_IFD_GBE_SECTION=""
 # CONFIG_BOARD_LENOVO_T430S is not set
 # CONFIG_BOARD_LENOVO_T500 is not set
 # CONFIG_BOARD_LENOVO_T520 is not set
+# CONFIG_BOARD_LENOVO_W520 is not set
 # CONFIG_BOARD_LENOVO_T530 is not set
 # CONFIG_BOARD_LENOVO_T60 is not set
 # CONFIG_BOARD_LENOVO_X131E is not set
@@ -162,12 +151,14 @@ CONFIG_IFD_GBE_SECTION=""
 CONFIG_BOARD_LENOVO_X230=y
 # CONFIG_BOARD_LENOVO_X60 is not set
 # CONFIG_BOARD_LENOVO_Z61T is not set
+# CONFIG_BOARD_LENOVO_BASEBOARD_T520 is not set
 CONFIG_CPU_ADDR_BITS=36
 CONFIG_DEFAULT_CONSOLE_LOGLEVEL=5
 # CONFIG_USBDEBUG is not set
 CONFIG_DRIVERS_PS2_KEYBOARD=y
 # CONFIG_PCIEXP_L1_SUB_STATE is not set
 # CONFIG_NO_POST is not set
+CONFIG_SMBIOS_ENCLOSURE_TYPE=0x09
 CONFIG_BOARD_ROMSIZE_KB_12288=y
 # CONFIG_COREBOOT_ROMSIZE_KB_64 is not set
 # CONFIG_COREBOOT_ROMSIZE_KB_128 is not set
@@ -184,7 +175,6 @@ CONFIG_COREBOOT_ROMSIZE_KB_12288=y
 # CONFIG_COREBOOT_ROMSIZE_KB_65536 is not set
 CONFIG_COREBOOT_ROMSIZE_KB=12288
 CONFIG_ROM_SIZE=0xc00000
-# CONFIG_MAINBOARD_HAS_TPM2 is not set
 CONFIG_SYSTEM_TYPE_LAPTOP=y
 # CONFIG_CBFS_AUTOGEN_ATTRIBUTES is not set
 
@@ -202,6 +192,7 @@ CONFIG_RAMBASE=0x100000
 CONFIG_EHCI_BAR=0xfef00000
 CONFIG_SERIRQ_CONTINUOUS_MODE=y
 CONFIG_SMM_TSEG_SIZE=0x800000
+CONFIG_SMM_RESERVED_SIZE=0x100000
 CONFIG_ACPI_CPU_STRING="\\_PR.CP%02d"
 # CONFIG_SOC_BROADCOM_CYGNUS is not set
 CONFIG_BOOTBLOCK_CPU_INIT="cpu/intel/model_206ax/bootblock.c"
@@ -213,6 +204,7 @@ CONFIG_VERSTAGE_ADDR=0x2000000
 CONFIG_SPI_FLASH_INCLUDE_ALL_DRIVERS=y
 CONFIG_DCACHE_RAM_MRC_VAR_SIZE=0x0
 CONFIG_BUILD_WITH_FAKE_IFD=y
+CONFIG_IED_REGION_SIZE=0x400000
 CONFIG_PCIEXP_ASPM=y
 CONFIG_PCIEXP_COMMON_CLOCK=y
 # CONFIG_PCIEXP_CLK_PM is not set
@@ -222,7 +214,6 @@ CONFIG_CACHE_MRC_SIZE_KB=512
 CONFIG_STACK_SIZE=0x1000
 CONFIG_CONSOLE_CBMEM=y
 CONFIG_UART_PCI_ADDR=0
-CONFIG_HPET_MIN_TICKS=0x80
 # CONFIG_SOC_INTEL_KABYLAKE is not set
 # CONFIG_SOC_LOWRISC_LOWRISC is not set
 # CONFIG_SOC_MARVELL_MVMAP2315 is not set
@@ -231,6 +222,7 @@ CONFIG_HPET_MIN_TICKS=0x80
 # CONFIG_SOC_NVIDIA_TEGRA210 is not set
 # CONFIG_SOC_QC_IPQ40XX is not set
 # CONFIG_SOC_QC_IPQ806X is not set
+# CONFIG_SOC_QUALCOMM_SDM845 is not set
 # CONFIG_SOC_ROCKCHIP_RK3288 is not set
 # CONFIG_SOC_ROCKCHIP_RK3399 is not set
 # CONFIG_CPU_SAMSUNG_EXYNOS5250 is not set
@@ -298,8 +290,7 @@ CONFIG_CPU_UCODE_BINARIES=""
 # CONFIG_AMD_NB_CIMX is not set
 # CONFIG_NORTHBRIDGE_AMD_CIMX_RD890 is not set
 # CONFIG_NORTHBRIDGE_AMD_PI is not set
-CONFIG_NORTHBRIDGE_INTEL_COMMON_MRC_CACHE=y
-CONFIG_MRC_CACHE_SIZE=0x10000
+# CONFIG_NORTHBRIDGE_INTEL_COMMON_MRC_CACHE is not set
 CONFIG_NORTHBRIDGE_INTEL_IVYBRIDGE=y
 CONFIG_USE_NATIVE_RAMINIT=y
 # CONFIG_NATIVE_RAMINIT_IGNORE_MAX_MEM_FUSES is not set
@@ -307,6 +298,7 @@ CONFIG_USE_NATIVE_RAMINIT=y
 CONFIG_SANDYBRIDGE_IVYBRIDGE_LVDS=y
 CONFIG_IF_NATIVE_VGA_INIT=y
 CONFIG_HPET_ADDRESS=0xfed00000
+CONFIG_HPET_MIN_TICKS=0x80
 CONFIG_MAX_PIRQ_LINKS=4
 
 #
@@ -327,6 +319,7 @@ CONFIG_SOUTHBRIDGE_INTEL_COMMON_SPI=y
 CONFIG_SOUTHBRIDGE_INTEL_COMMON_PIRQ_ACPI_GEN=y
 CONFIG_SOUTHBRIDGE_INTEL_COMMON_RCBA_PIRQ=y
 CONFIG_HAVE_INTEL_CHIPSET_LOCKDOWN=y
+CONFIG_SOUTHBRIDGE_INTEL_COMMON_SMM=y
 CONFIG_INTEL_CHIPSET_LOCKDOWN=y
 # CONFIG_LOCK_MANAGEMENT_ENGINE is not set
 
@@ -354,6 +347,11 @@ CONFIG_IFD_PLATFORM_SECTION=""
 # CONFIG_GOOGLE_SMBIOS_MAINBOARD_VERSION is not set
 # CONFIG_UEFI_2_4_BINDING is not set
 # CONFIG_UDK_2015_BINDING is not set
+# CONFIG_UDK_2017_BINDING is not set
+CONFIG_UDK_2013_VERSION=2013
+CONFIG_UDK_2015_VERSION=2015
+CONFIG_UDK_2017_VERSION=2017
+CONFIG_UDK_VERSION=2013
 # CONFIG_USE_SIEMENS_HWILIB is not set
 # CONFIG_ARCH_ARM is not set
 # CONFIG_ARCH_BOOTBLOCK_ARM is not set
@@ -384,6 +382,8 @@ CONFIG_IFD_PLATFORM_SECTION=""
 # CONFIG_ARCH_VERSTAGE_ARMV8_64 is not set
 # CONFIG_ARCH_ROMSTAGE_ARMV8_64 is not set
 # CONFIG_ARCH_RAMSTAGE_ARMV8_64 is not set
+CONFIG_ARCH_ARMV8_EXTENSION=0
+# CONFIG_ARM64_USE_ARCH_TIMER is not set
 # CONFIG_ARM64_A53_ERRATUM_843419 is not set
 # CONFIG_ARCH_MIPS is not set
 # CONFIG_ARCH_BOOTBLOCK_MIPS is not set
@@ -396,6 +396,7 @@ CONFIG_IFD_PLATFORM_SECTION=""
 # CONFIG_ARCH_ROMSTAGE_POWER8 is not set
 # CONFIG_ARCH_RAMSTAGE_POWER8 is not set
 # CONFIG_ARCH_RISCV is not set
+# CONFIG_ARCH_RISCV_COMPRESSED is not set
 # CONFIG_ARCH_BOOTBLOCK_RISCV is not set
 # CONFIG_ARCH_VERSTAGE_RISCV is not set
 # CONFIG_ARCH_ROMSTAGE_RISCV is not set
@@ -423,12 +424,15 @@ CONFIG_HAVE_CMOS_DEFAULT=y
 CONFIG_CMOS_DEFAULT_FILE="src/mainboard/$(MAINBOARDDIR)/cmos.default"
 CONFIG_IOAPIC_INTERRUPTS_ON_FSB=y
 # CONFIG_IOAPIC_INTERRUPTS_ON_APIC_SERIAL_BUS is not set
+CONFIG_ID_SECTION_OFFSET=0x80
 # CONFIG_POSTCAR_STAGE is not set
 # CONFIG_VERSTAGE_DEBUG_SPINLOOP is not set
 # CONFIG_ROMSTAGE_DEBUG_SPINLOOP is not set
 CONFIG_BOOTBLOCK_SIMPLE=y
 # CONFIG_BOOTBLOCK_NORMAL is not set
 CONFIG_BOOTBLOCK_SOURCE="bootblock_simple.c"
+# CONFIG_PAGING_IN_CACHE_AS_RAM is not set
+# CONFIG_IDT_IN_EVERY_STAGE is not set
 
 #
 # Devices
@@ -470,6 +474,13 @@ CONFIG_SUBSYSTEM_DEVICE_ID=0x0000
 # CONFIG_GIC is not set
 # CONFIG_IPMI_KCS is not set
 # CONFIG_DRIVERS_LENOVO_WACOM is not set
+CONFIG_CACHE_MRC_SETTINGS=y
+CONFIG_MRC_SETTINGS_CACHE_SIZE=0x10000
+# CONFIG_MRC_SETTINGS_PROTECT is not set
+# CONFIG_HAS_RECOVERY_MRC_CACHE is not set
+# CONFIG_MRC_CLEAR_NORMAL_CACHE_ON_RECOVERY_RETRAIN is not set
+# CONFIG_MRC_SETTINGS_VARIABLE_DATA is not set
+# CONFIG_MRC_WRITE_NV_LATE is not set
 # CONFIG_RT8168_GET_MAC_FROM_VPD is not set
 # CONFIG_RT8168_SET_LED_MODE is not set
 CONFIG_SPI_FLASH=y
@@ -505,7 +516,9 @@ CONFIG_HAVE_USBDEBUG=y
 CONFIG_HAVE_USBDEBUG_OPTIONS=y
 # CONFIG_DRIVERS_AMD_PI is not set
 CONFIG_SMBIOS_PROVIDED_BY_MOBO=y
+# CONFIG_DRIVERS_I2C_MAX98373 is not set
 # CONFIG_DRIVERS_I2C_MAX98927 is not set
+# CONFIG_DRIVERS_I2C_PCA9538 is not set
 # CONFIG_DRIVERS_I2C_PCF8523 is not set
 # CONFIG_DRIVERS_I2C_RT5663 is not set
 # CONFIG_DRIVERS_I2C_RTD2132 is not set
@@ -513,11 +526,13 @@ CONFIG_SMBIOS_PROVIDED_BY_MOBO=y
 # CONFIG_I2C_TPM is not set
 # CONFIG_MAINBOARD_HAS_I2C_TPM_ATMEL is not set
 # CONFIG_MAINBOARD_HAS_I2C_TPM_CR50 is not set
+# CONFIG_PLATFORM_USES_FSP2_0 is not set
 # CONFIG_INTEL_DDI is not set
 CONFIG_INTEL_EDID=y
 CONFIG_INTEL_INT15=y
 CONFIG_INTEL_GMA_ACPI=y
 # CONFIG_INTEL_GMA_SSC_ALTERNATE_REF is not set
+# CONFIG_INTEL_GMA_SWSMISCI is not set
 CONFIG_GFX_GMA=y
 CONFIG_GFX_GMA_CPU="Ivybridge"
 CONFIG_GFX_GMA_CPU_VARIANT="Normal"
@@ -534,12 +549,12 @@ CONFIG_DRIVERS_INTEL_WIFI=y
 # CONFIG_DRIVER_PARADE_PS8625 is not set
 # CONFIG_DRIVER_PARADE_PS8640 is not set
 CONFIG_DRIVERS_MC146818=y
-CONFIG_MAINBOARD_HAS_LPC_TPM=y
 CONFIG_LPC_TPM=y
 CONFIG_TPM_TIS_BASE_ADDRESS=0xfed40000
 # CONFIG_TPM_INIT_FAILURE_IS_FATAL is not set
 # CONFIG_SKIP_TPM_STARTUP_ON_NORMAL_BOOT is not set
 # CONFIG_TPM_DEACTIVATE is not set
+# CONFIG_TPM_RDRESP_NEED_DELAY is not set
 CONFIG_VGA=y
 CONFIG_DRIVERS_RICOH_RCE822=y
 # CONFIG_DRIVER_SIEMENS_NC_FPGA is not set
@@ -559,6 +574,15 @@ CONFIG_DRIVERS_RICOH_RCE822=y
 #
 # Verified Boot (vboot)
 #
+
+#
+# Trusted Platform Module
+#
+CONFIG_TPM=y
+# CONFIG_DEBUG_TPM is not set
+# CONFIG_MAINBOARD_HAS_TPM_CR50 is not set
+CONFIG_MAINBOARD_HAS_LPC_TPM=y
+# CONFIG_MAINBOARD_HAS_TPM2 is not set
 CONFIG_ACPI_SATA_GENERATOR=y
 CONFIG_ACPI_INTEL_HARDWARE_SLEEP_VALUES=y
 # CONFIG_ACPI_AMD_HARDWARE_SLEEP_VALUES is not set
@@ -567,8 +591,6 @@ CONFIG_BOOT_DEVICE_SPI_FLASH=y
 CONFIG_BOOT_DEVICE_MEMORY_MAPPED=y
 # CONFIG_BOOT_DEVICE_SUPPORTS_WRITES is not set
 CONFIG_RTC=y
-CONFIG_TPM=y
-# CONFIG_MAINBOARD_HAS_TPM_CR50 is not set
 
 #
 # Console
@@ -640,6 +662,7 @@ CONFIG_PAYLOAD_OPTIONS=""
 CONFIG_LINUX_COMMAND_LINE="quiet"
 CONFIG_LINUX_INITRD="../../build/x230/initrd.cpio.xz"
 # CONFIG_PAYLOAD_IS_FLAT_BINARY is not set
+CONFIG_COMPRESS_SECONDARY_PAYLOAD=y
 
 #
 # Secondary Payloads
@@ -663,7 +686,6 @@ CONFIG_HAVE_DEBUG_SMBUS=y
 CONFIG_DEBUG_SMM_RELOCATION=y
 # CONFIG_DEBUG_MALLOC is not set
 # CONFIG_DEBUG_ACPI is not set
-# CONFIG_DEBUG_TPM is not set
 # CONFIG_DEBUG_SPI_FLASH is not set
 # CONFIG_TRACE is not set
 # CONFIG_DEBUG_BOOT_STATE is not set
